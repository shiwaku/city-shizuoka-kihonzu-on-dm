{
  "version": 8,
  "name": "city-shizuoka-kihonzu",
  "glyphs": "https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",
  "sprite": "https://geolonia.github.io/smartcity-dm-sprite/sprite",
  "sources": {
    "kihonzu": {
      "type": "vector",
      "url": "pmtiles://https://pmtiles-data.s3.ap-northeast-1.amazonaws.com/city-shizuoka/kihonzu.pmtiles",
      "attribution": "<a href=\"https://data.bodik.jp/dataset/221007_1712212695\" target=\"_blank\">測量法第44条に基づき、静岡市長の承認を得て1/2,500および1/10,000都市計画基本図を加工して作成（承認番号：07静都都第2068号）</a>"
    }
  },
  "layers": [
    {
      "id": "kihonzu_10000_polygon_fill",
      "type": "fill",
      "source": "kihonzu",
      "source-layer": "kihonzu_10000_polygon",
      "minzoom": 2,
      "maxzoom": 14,
      "paint": {
        "fill-color": "#ffffff",
        "fill-opacity": 0.3
      }
    },
    {
      "id": "kihonzu_10000_polygon_outline",
      "type": "line",
      "source": "kihonzu",
      "source-layer": "kihonzu_10000_polygon",
      "minzoom": 2,
      "maxzoom": 14,
      "paint": {
        "line-color": "#000000",
        "line-width": 0.3
      }
    },

    {
      "id": "kihonzu_10000_line_sidewalk",
      "type": "line",
      "source": "kihonzu",
      "source-layer": "kihonzu_10000_line",
      "minzoom": 2,
      "maxzoom": 14,
      "filter": ["==", ["to-number", ["get", "Layer"]], 2213],
      "paint": {
        "line-color": "#000000",
        "line-width": 0.5,
        "line-dasharray": [5, 5]
      }
    },
    {
      "id": "kihonzu_10000_line_contour",
      "type": "line",
      "source": "kihonzu",
      "source-layer": "kihonzu_10000_line",
      "minzoom": 12,
      "maxzoom": 14,
      "filter": [
        "in",
        ["to-number", ["get", "Layer"]],
        ["literal", [7101, 7102, 7103, 7104]]
      ],
      "paint": {
        "line-color": "#000000",
        "line-width": 0.5
      }
    },
    {
      "id": "kihonzu_10000_line_building",
      "type": "line",
      "source": "kihonzu",
      "source-layer": "kihonzu_10000_line",
      "minzoom": 13,
      "maxzoom": 14,
      "filter": [
        "in",
        ["to-number", ["get", "Layer"]],
        ["literal", [3001, 3002, 3003, 3004]]
      ],
      "paint": {
        "line-color": "#000000",
        "line-width": 0.5
      }
    },
    {
      "id": "kihonzu_10000_line_other",
      "type": "line",
      "source": "kihonzu",
      "source-layer": "kihonzu_10000_line",
      "minzoom": 2,
      "maxzoom": 14,
      "filter": [
        "all",
        ["!=", ["to-number", ["get", "Layer"]], 2213],
        [
          "!",
          [
            "in",
            ["to-number", ["get", "Layer"]],
            ["literal", [7101, 7102, 7103, 7104]]
          ]
        ],
        [
          "!",
          [
            "in",
            ["to-number", ["get", "Layer"]],
            ["literal", [3001, 3002, 3003, 3004]]
          ]
        ]
      ],
      "paint": {
        "line-color": "#000000",
        "line-width": 0.5
      }
    },
    {
      "id": "kihonzu_10000_symbol",
      "type": "symbol",
      "source": "kihonzu",
      "source-layer": "kihonzu_10000_symbol",
      "minzoom": 13,
      "maxzoom": 14,
      "layout": {
        "icon-image": ["concat", "dm-", ["to-string", ["get", "Layer"]]],
        "icon-size": [
          "interpolate",
          ["linear"],
          ["zoom"],
          13,
          [
            "*",
            0.5,
            ["case", ["==", ["to-string", ["get", "Layer"]], "2238"], 0.4, 1.0]
          ],
          14,
          [
            "*",
            0.75,
            ["case", ["==", ["to-string", ["get", "Layer"]], "2238"], 0.4, 1.0]
          ]
        ],
        "icon-allow-overlap": true,
        "icon-ignore-placement": true
      }
    },
    {
      "id": "kihonzu_10000_annotation",
      "type": "symbol",
      "source": "kihonzu",
      "source-layer": "kihonzu_10000_annotation",
      "minzoom": 13,
      "maxzoom": 14,
      "layout": {
        "text-field": ["coalesce", ["get", "Text"], ""],
        "text-size": 10,
        "text-anchor": "center",
        "text-offset": [1.5, -1],
        "text-rotation-alignment": "map",
        "text-rotate": [
          "let",
          "a",
          ["coalesce", ["to-number", ["get", "KAKUDO"]], 0],
          [
            "case",
            ["any", ["==", ["var", "a"], 90], ["==", ["var", "a"], -90]],
            0,
            ["*", -1, ["var", "a"]]
          ]
        ]
      },
      "paint": {
        "text-color": "#000",
        "text-halo-color": "#fff",
        "text-halo-width": 1.5
      }
    },

    {
      "id": "kihonzu_2500_polygon_fill",
      "type": "fill",
      "source": "kihonzu",
      "source-layer": "kihonzu_2500_polygon",
      "minzoom": 14,
      "paint": {
        "fill-color": "#ffffff",
        "fill-opacity": 0.25
      }
    },
    {
      "id": "kihonzu_2500_polygon_outline",
      "type": "line",
      "source": "kihonzu",
      "source-layer": "kihonzu_2500_polygon",
      "minzoom": 14,
      "paint": {
        "line-color": "#000000",
        "line-width": 0.6
      }
    },

    {
      "id": "kihonzu_2500_line_sidewalk",
      "type": "line",
      "source": "kihonzu",
      "source-layer": "kihonzu_2500_line",
      "minzoom": 14,
      "filter": ["==", ["to-number", ["get", "Layer"]], 2213],
      "paint": {
        "line-color": "#000000",
        "line-width": 0.5,
        "line-dasharray": [5, 5]
      }
    },
    {
      "id": "kihonzu_2500_line_contour",
      "type": "line",
      "source": "kihonzu",
      "source-layer": "kihonzu_2500_line",
      "minzoom": 14,
      "filter": [
        "in",
        ["to-number", ["get", "Layer"]],
        ["literal", [7101, 7102, 7103, 7104]]
      ],
      "paint": {
        "line-color": "#000000",
        "line-width": 0.5
      }
    },
    {
      "id": "kihonzu_2500_line_building",
      "type": "line",
      "source": "kihonzu",
      "source-layer": "kihonzu_2500_line",
      "minzoom": 14,
      "filter": [
        "in",
        ["to-number", ["get", "Layer"]],
        ["literal", [3001, 3002, 3003, 3004]]
      ],
      "paint": {
        "line-color": "#000000",
        "line-width": 1
      }
    },
    {
      "id": "kihonzu_2500_line_other",
      "type": "line",
      "source": "kihonzu",
      "source-layer": "kihonzu_2500_line",
      "minzoom": 14,
      "filter": [
        "all",
        ["!=", ["to-number", ["get", "Layer"]], 2213],
        [
          "!",
          [
            "in",
            ["to-number", ["get", "Layer"]],
            ["literal", [7101, 7102, 7103, 7104]]
          ]
        ],
        [
          "!",
          [
            "in",
            ["to-number", ["get", "Layer"]],
            ["literal", [3001, 3002, 3003, 3004]]
          ]
        ]
      ],
      "paint": {
        "line-color": "#000000",
        "line-width": 1
      }
    },

    {
      "id": "kihonzu_2500_symbol",
      "type": "symbol",
      "source": "kihonzu",
      "source-layer": "kihonzu_2500_symbol",
      "minzoom": 14,
      "layout": {
        "icon-image": ["concat", "dm-", ["to-string", ["get", "Layer"]]],
        "icon-size": [
          "interpolate",
          ["linear"],
          ["zoom"],
          14,
          [
            "*",
            0.5,
            ["case", ["==", ["to-string", ["get", "Layer"]], "2238"], 0.4, 1.0]
          ],
          18,
          [
            "*",
            1,
            ["case", ["==", ["to-string", ["get", "Layer"]], "2238"], 0.4, 1.0]
          ]
        ],
        "icon-allow-overlap": true,
        "icon-ignore-placement": true
      }
    },
    {
      "id": "kihonzu_2500_annotation",
      "type": "symbol",
      "source": "kihonzu",
      "source-layer": "kihonzu_2500_annotation",
      "minzoom": 14,
      "layout": {
        "text-field": ["coalesce", ["get", "Text"], ""],
        "text-size": [
          "case",
          ["in", ["to-number", ["get", "Layer"]], ["literal", [7312, 7101]]],
          9,
          14
        ],
        "text-anchor": "center",
        "text-offset": [1.5, -1],
        "text-rotation-alignment": "map",
        "text-rotate": [
          "let",
          "a",
          ["coalesce", ["to-number", ["get", "KAKUDO"]], 0],
          [
            "case",
            ["any", ["==", ["var", "a"], 90], ["==", ["var", "a"], -90]],
            0,
            ["*", -1, ["var", "a"]]
          ]
        ]
      },
      "paint": {
        "text-color": "#000",
        "text-halo-color": "#fff",
        "text-halo-width": 1.5
      }
    }
  ]
}
